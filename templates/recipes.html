{% extends "base.html" %}
{% block content %}
    

    <h3 class="tittle center-align light-blue-text">All Recipes</h3>
    
    <!--SEARCH -->
	<section class="container">
		<div class="row card-panel">
			<form action="{{ url_for('search') }}" method="POST" class="col s12">
				<div class="row valign-wrapper center-align">
					<div class="input-field col s12 m8">
						<input type="text" name="query" id="query" minlength="3" class= "validate" required>
                        <label for="query"> Find a recipe !</label>
	                </div>
                    <!--PENDING TO ADD FILTERS FOR CATEGORY AND INGREDIENTS -->
                    <!--is reset bottom necesary -->
	                <div class="col s12 m4">
	                    <!-- <a href="{{ url_for('get_recipes') }}" class="red btn text-shadow">Reset</a> -->
	                    <button type="submit" class="light-blue darken-1 btn text-shadow">
	                        <i class= "fas fa-search left"></i>Search
	                    </button>
	                </div>            
	            </div>
	        </form>
	    </div> 
	</section>

    <!--Show recipes when share_recipes toggle is ON unless user=ADMIN--> 
    <div class="container">
        <div class="row"> 
        {% for recipe in recipes %}
            <!--Show recipes when user=ADMIN-->        
            {% if session.user|lower == "admin"|lower %}
                <div class="col s12 m6 l4">
                    <div class="card">
                        <div class="card-image all-recipes waves-effect waves-block waves-light">
                            <img class="activator responsive-img fit-size" src="{{ recipe.recipe_images }}">
                        </div>
                        <div class="card-content card-recipes-content">
                            <span class="tittle card-title activator grey-text text-darken-4"><a href="{{ url_for('view_recipe',recipe_id=recipe._id) }}">{{ recipe.recipe_name }}</a>
                            <i class="material-icons right">more_vert</i></span>
                            <p class="category-tittle"><a href="#">{{ recipe.category_name }}</a></p> <!--PENDING to hook to the corresponding category search) -->
                            <p class="right-align"><em> by : {{ recipe.created_by }} </em></p> 
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">Recipe Description<i class="material-icons right">close</i></span>
                            {% if recipe.recipe_description|length > 0 %} 
                                <p class="light">{{ recipe.recipe_description }}</p>
                            {% else %}
                                <p class="light">Description not available</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            <!--Show recipes when share_recipes toggle is ON-->     
            {% elif recipe.share_recipe =="on"  %}
                <div class="col s12 m6 l4">
                    <div class="card">
                        <div class="card-image all-recipes waves-effect waves-block waves-light">
                            <img class="activator responsive-img fit-size" src="{{ recipe.recipe_images }}">
                        </div>
                        <div class="card-content card-recipes-content">
                            <span class="tittle card-title activator grey-text text-darken-4"><a href="{{ url_for('view_recipe',recipe_id=recipe._id) }}">{{ recipe.recipe_name }}</a>
                            <i class="material-icons right">more_vert</i></span>
                            <p class="category-tittle"><a href="#">{{ recipe.category_name }}</a></p> <!--PENDING to hook to the corresponding category search) -->
                            <p class="right-align"><em> by : {{ recipe.created_by }} </em></p> 
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">Recipe Description<i class="material-icons right">close</i></span>
                            {% if recipe.recipe_description|length > 0 %} 
                                <p class="light">{{ recipe.recipe_description }}</p>
                            {% else %}
                                <p class="light">Description not available</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
        
        </div>
    </div>
    
    <!--PENDING to connect pagination-->
    <ul class="pagination center">
        <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
        <li class="active"><a href="#!">1</a></li>
        <li class="waves-effect"><a href="#!">2</a></li>
        <li class="waves-effect"><a href="#!">3</a></li>
        <li class="waves-effect"><a href="#!">4</a></li>
        <li class="waves-effect"><a href="#!">5</a></li>
        <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
    </ul>  


{% endblock %}

