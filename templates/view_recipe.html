{% extends "base.html" %}
{% block content %}
    

    <h3 class="center-align light-blue-text">All Recipes</h3>
    <!--change this to card with images and the info below collapsible-->
    
	<section class="container">
		<div class="row card-panel">
			<form action="{{ url_for('search') }}" method="POST" class="col s12">
				<div class="row valign-wrapper center-align">
					<div class="input-field col s12 m8">
						<!-- <i class="fas fa-search left"></i>  -->
	                    <input type="text" name="query" id="query" minlength="3" class= "validate" required>
                        <label for="query"> Find a recipe !</label>
	                </div>
	                <div class="col s12 m4">
	                    <a href="{{ url_for('get_recipes') }}" class="red btn text-shadow">Reset</a>
	                    <button type="submit" class="light-blue darken-1 btn text-shadow">
	                        <i class= "fas fa-search left"></i>Search
	                    </button>
	                </div>            
	            </div>
	        </form>
	    </div> 
	</section>

    <!--PENDING HOW TO MAKE THEM DISPLAY SIDE BY SIZE-->
    <div class="row"> 
        {% for recipe in recipes %}
        <div class="col s12 m6  l4">
            <div class="card horizontal large">
                <div class="card-image">
                    <img class="responsive-img" src="{{ recipe.recipe_images }}">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                        <span class="card-title grey-text text-darken-4"><strong>{{ recipe.recipe_name }}</strong></span>
                        {% if recipe.recipe_description|length > 0 %} 
                            <p>{{ recipe.recipe_description }}</p>
                        {% endif %}
                        <p>{{ recipe.category_name }}</p>
                        <ul class="collapsible">
                            <li>
                                <div class="collapsible-header"><i class="far fa-caret-square-down"></i>Basic Ingredients: </div>
                                <div class="collapsible-body">
                                    {% for basic_ingredient in recipe.basic_ingredients %}
                                    <span id="bullet"> {{ basic_ingredient }}</span>
                                    {% endfor %}
                                </div>    
                            </li>
                            {% if recipe.complementary_ingredients|length > 0 %} 
                            <li>
                                <div class="collapsible-header"><i class="far fa-caret-square-down"></i>Complement with: </div>
                                <div class="collapsible-body">
                                    {% for complementary_ingredient in recipe.complementary_ingredients %}
                                    <span id="bullet2"> {{ complementary_ingredient }}</span>
                                    {% endfor %}
                                </div>
                            </li>
                            {% endif %}
                            <!--unpacking not working because is an object-->
                            <li>
                                <div class="collapsible-header"><i class="far fa-caret-square-down"></i>Method: </div>
                                <div class="collapsible-body">
                                    {% for recipe_method in recipe.recipe_method  %}
                                    <span> {{ recipe_method }}</span>
                                    {% endfor %}
                                </div>    
                            </li>
                            {% if recipe.recipe_method2|length > 0 %}
                            <li>
                                <div class="collapsible-header"><i class="far fa-caret-square-down"></i>Method2: </div>
                                <div class="collapsible-body">
                                    {% for recipe_method in recipe.recipe_method2  %}
                                    <span> {{ recipe_method }}</span>
                                    {% endfor %}
                                </div>    
                            </li>
                            {% endif %}
                            {% if recipe.closing_line|length > 0 %}
                            <h6 class="center-align">{{ recipe.closing_line }}</h5>
                            {% endif %}
                        </ul>
                    </div>
                    <div class="card-action">
                        {% if session.user|lower == recipe.created_by|lower %}
                            <!--ADD delete DEFENSIVE PROGRAMING USER MUST CONFIRM IF THEY WANT TO REALLY DELETE TASK-->
                            <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="btn-small amber accent-4">Done</a>
                            <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="btn-small amber accent-4">Edit</a>
                        {% endif %}
                    </div>
                    <!--WHEN WE SHARE RECIPE TO THE PUBLIC CREATED BY SHOULD BE REPLACE FOR BOTTOMS-->
                    <!--<div class="card-action">
                        <p><em> by:{{ recipe.created_by }} </em></p>
                    </div>-->
                </div>
            </div>
        </div>    
        {% endfor %}
    </div>

    <!--PENDING to make pagination-->
    <ul class="pagination center">
        <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
        <li class="active"><a href="#!">1</a></li>
        <li class="waves-effect"><a href="#!">2</a></li>
        <li class="waves-effect"><a href="#!">3</a></li>
        <li class="waves-effect"><a href="#!">4</a></li>
        <li class="waves-effect"><a href="#!">5</a></li>
        <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
    </ul>  
{% endblock %}

